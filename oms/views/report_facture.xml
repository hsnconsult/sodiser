<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data>
<template id="minimal_layout_inherit" inherit_id="web.minimal_layout">
		<xpath expr="//head" position="inside">
			<link rel='stylesheet' href="/oms/static/src/css/oms.css"/>
		</xpath>
</template>
<template id="report_facture">
    <t t-call="web.html_container">
        <t t-set="data_report_margin_top" t-value="12"/>
        <t t-set="data_report_header_spacing" t-value="9"/>
        <t t-set="data_report_dpi" t-value="110"/>
        <t t-foreach="docs" t-as="o">
            <t t-call="web.basic_layout">
        <div class="page">
            <div class="vide">

            </div>

            <h2>
                <span t-if="o.type == 'out_invoice' and (o.state == 'open' or o.state == 'paid')" class="titre">Facture N°</span>
                <span t-if="o.type == 'out_invoice' and o.state == 'proforma2'">PRO-FORMA</span>
                <span t-if="o.type == 'out_invoice' and o.state == 'draft'">Draft Invoice</span>
                <span t-if="o.type == 'out_invoice' and o.state == 'cancel'">Cancelled Invoice</span>
                <span t-if="o.type == 'out_refund'">Refund</span>
                <span t-if="o.type == 'in_refund'">Vendor Refund</span>
                <span t-if="o.type == 'in_invoice'">Vendor Bill</span>
                <span t-field="o.number" class="poste"/>
            </h2>
                    <p><div align="right" class="titre" style="width:70%">Doit: </div></p>
            <div class="entete" style="width:35%">
						<table class="table table-condensed invoice_tbody poste" width="35%">
  							<thead><tr><th width="50%">DATE</th><th>REFERENCE</th></tr></thead>
  							<tbody><tr><td><span t-esc="o.date_invoice" t-esc-options='{"widget": "date"}'/></td><td><span t-esc="o.origin"/><span t-esc="o.numbeman"/></td></tr></tbody>
						</table>
            </div>
                      <div class="entete info" style="width:60%;float:right">
                           <span><strong>Nom:...</strong></span> <span t-esc="o.partner_id.name" /><br/>
                           <span><strong>Adresse:</strong></span>... <span t-esc="o.partner_id.street" /><br/>
                           <span><strong>Code postal:</strong></span>... <span t-esc="o.partner_id.zip" />... <span><strong>Ville:</strong></span>... <span t-esc="o.partner_id.idzone.name" />... <span><strong>Pays:</strong></span>... <span t-esc="o.partner_id.country_id.name" /><br/>
                           <span><strong>Téléphone:</strong></span>... <span t-esc="o.partner_id.phone" /><br/>
                      </div>

            <!-- Is there a discount on at least one line? -->
            <t t-set="display_discount" t-value="any([l.discount for l in o.invoice_line_ids])"/>
          <div class="tableaufact">
            <table class="table table-condensed">
                <thead>
                    <tr>
                        <th>Désignation</th>
                        <th class="hidden">Source Document</th>
                        <th class="text-right">Quantité</th>
                        <th class="text-right">Prix unitaire</th>
                        <th class="text-right">PVMA</th>
                        <th class="text-right">Montant HT</th>
                    </tr>
                </thead>
                <tbody class="invoice_tbody poste">
                    <tr t-foreach="o.invoice_line_ids" t-as="l">
                        <td><span t-field="l.name"/></td>
                        <td class="hidden"><span t-field="l.origin"/></td>
                        <td class="text-right">
                            <span t-field="l.quantity"/>
                            <span t-field="l.uom_id"  groups="product.group_uom"/>
                        </td>
                        <td class="text-right">
                            <span t-field="l.pu_officiel"/>
                        </td>
                        <td class="text-right">
                             <span t-esc="'{:,.0f}'.format(l.get_pvmax(l.product_id.id,l.invoice_id.partner_id.idzone.id)).replace(',', ' ').replace('.', ',')"/>
                        </td>
                        <td class="text-right">
                            <span t-field="l.price_subtotalo" 
                                t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                        </td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <div class="col-xs-4 pull-right" style="width:50%">
                    <table class="table table-condensed poste">
                        <tr class="border-black">
                            <td><strong>Total HT</strong></td>
                            <td class="text-right">
                                <span t-field="o.amount_untaxedo" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                            </td>
                        </tr>

                            <tr>
                                <td><span>Prélèvement 0.2%</span></td>
                                <td class="text-right">
                                    <span t-field="o.amount_taxo" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                </td>
                            </tr>

                        <tr class="border-black">
                            <td><strong>NET A PAYER</strong></td>
                            <td class="text-right">
                                 <strong><span t-field="o.amount_totalo" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/></strong>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>


            <!-- DO NOT REMOVE THIS TABLE. MANDATORY IN SOME COUNTRIES -->
            <div class="row" t-if="len(o.tax_line_ids) > 0">
                <div class="col-xs-6">
                    <table class="table table-condensed poste">
                        <thead>
                            <tr>
                                <th>Taux</th>
                                <th class="text-right">Base</th>
                                <th class="text-right">Montant</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="o.tax_line_ids" t-as="t">
                                <td><span>0.2%</span></td>
                                <td class="text-right">
                                    <span t-field="o.amount_untaxedo" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                </td>
                                <td class="text-right">
                                    <span t-field="o.amount_taxo" t-options='{"widget": "monetary", "display_currency": o.currency_id}'/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <p t-if="o.comment">
                <strong>Comment:</strong>
                <span t-field="o.comment"/>
            </p>
            <p t-if="o.payment_term_id">
                <span t-field="o.payment_term_id.note"/>
            </p>
            <p t-if="o.fiscal_position_id.note">
                <strong>Fiscal Position Remark:</strong>
                <span t-field="o.fiscal_position_id.note"/>
            </p>
         </div>
                     <div class="poste esp"><span>Arretée la présente à la somme de :<br/></span> <span t-esc="o.compute_amount_text()" style="color:#800000"/><span style="color:#800000">  (<span t-esc="'{:,.0f}'.format(o.amount_totalo).replace(',', ' ').replace('.', ',')"/>) Francs CFA</span><br/></div>
                      <div class="signature2 poste">
						Pour SODIS OIL<br/><br/><br/><br/><br/>
                        Le Directeur Général
                      </div>
                    <div class="poste esp" align="center" style="width:100%; float:left"><span t-esc="res_company.street2"/></div>
        </div>
        </t>
    </t>
    </t>
</template>

<template id="report_invoice">
    <t t-call="report.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="account.report_invoice_document" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>

<template id="account_invoice_report_duplicate" inherit_id="account.report_invoice_document" primary="True">
    <xpath expr="//h2" position="replace">
        <h2>
            <span>Duplicate</span>
            <span t-if="o.type == 'out_refund'">refund</span>
            <span t-if="o.type == 'out_invoice'">invoice</span>
            <span t-field="o.number"/>
        </h2>
    </xpath>
</template>

<template id="account_invoice_report_duplicate_main">
    <t t-call="report.html_container">
        <t t-foreach="docs" t-as="o">
            <t t-call="account.account_invoice_report_duplicate" t-lang="o.partner_id.lang"/>
        </t>
    </t>
</template>
</data>
</odoo>
